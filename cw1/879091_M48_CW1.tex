\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
\usepackage{graphicx}			
\usepackage{amssymb}
\usepackage{caption}
\usepackage{float}
\usepackage{gensymb}
\PassOptionsToPackage{hyphens}{url}\usepackage[hidelinks]{hyperref}
\frenchspacing
\usepackage{lmodern}  % for bold teletype font
\usepackage{amsmath}  % for \hookrightarrow
\usepackage{listings,xcolor}
\definecolor{purple}{HTML}{B100A7}
\definecolor{cred}{HTML}{E35C75}
\definecolor{dkgreen}{rgb}{0,.6,0}
\definecolor{dkblue}{rgb}{0,0,.6}
\definecolor{dkyellow}{cmyk}{0,0,.8,.3}
\lstset{
  language        = Java,
  basicstyle      = \small\ttfamily,
  keywordstyle    = \color{cred},
  stringstyle     = \color{dkgreen},
  commentstyle    = \color{gray},
  otherkeywords={$},
  alsoother     = $\@,
  %identifierstyle = \color{dkyellow},
  emph            =[1]{require_once, require, include_once, include, namespace, use, class, function, new},
  emphstyle       =[1]\color{purple},%\bf,
  emph            =[2]{echo, empty, isset, array, instanceof},
  emphstyle       =[2]\color{cred},%\bf,
  emph            = [3]{var, const, abstract, 
                        protected, private, public,
                        static, final, extends, implements,
                        global, if, else, foreach ,for,
                        endforeach, endif, endfor, elseif,
                        as, return},
  keywords    ={__halt_compiler,    abstract,   and,    array,
                    as, break,  callable,   case,   catch,  class,
                    clone,  const,  continue,   declare,    default,
                    die,    do, echo,   else,   elseif,
                    empty,  enddeclare, endfor, endforeach, endif,
                    endswitch,  endwhile,   eval,   exit,   extends,
                    final,  finally,    for,    foreach,    function,
                    global, goto, if,   implements, include,
                    include_once,   instanceof, insteadof,
                    interface,  isset, list,    namespace,
                    new,    or, print, private, protected,  public,
                    require,    require_once, return,   static,
                    switch, throw,  trait, try, unset, use, var,
                    while,  xor, yield},
}

%SetFonts
\usepackage[explicit]{titlesec}

%SetFonts

\title{\textbf{CSCM48 - Web Application Development} \\ Coursework 1}
\author{\bf Cristian Sorescu 879091}
%\date{}							% Activate to display a given date or no date

\begin{document}
\maketitle

\newpage
\tableofcontents
\newpage

\section{Models}
\begin{lstlisting}[showstringspaces=false, title=Post.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Notifications\Notifiable;

class Post extends Model
{
    use Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var array
     */
    protected $fillable = [
        'title', 'content',
    ];

    public function user()
    {
        return $this->belongsTo('App\User');
    }

    public function tags()
    {
        return $this->belongsToMany('App\Tag');
    }

    public function comments()
    {
        return $this->hasMany('App\Comment');
    }

    public function views()
    {
        return $this->hasMany('App\View');
    }

    public function votes()
    {
        return $this->hasMany('App\Vote');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=Comment.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Comment extends Model
{
    public function user()
    {
        return $this->belongsTo('App\User');
    }

    public function post()
    {
        return $this->belongsTo('App\Post');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=User.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Contracts\Auth\MustVerifyEmail;
use Illuminate\Foundation\Auth\User as Authenticatable;
use Illuminate\Notifications\Notifiable;

class User extends Authenticatable
{
    use Notifiable;

    /**
     * The attributes that are mass assignable.
     *
     * @var array
     */
    protected $fillable = [
        'name', 'email', 'password',
    ];

    /**
     * The attributes that should be hidden for arrays.
     *
     * @var array
     */
    protected $hidden = [
        'password', 'remember_token',
    ];

    /**
     * The attributes that should be cast to native types.
     *
     * @var array
     */
    protected $casts = [
        'email_verified_at' => 'datetime',
    ];

    public function profile()
    {
        return $this->hasOne('App\Profile');
    }

    public function posts()
    {
        return $this->hasMany('App\Post');
    }

    public function comments()
    {
        return $this->hasMany('App\Comment');
    }

    public function votes()
    {
        return $this->hasMany('App\Vote');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=Profile.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Profile extends Model
{
    public function user()
    {
        return $this->belongsTo('App\User');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=Tag.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Tag extends Model
{
    public function posts()
    {
        return $this->belongsToMany('App\Post');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=View.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class View extends Model
{
    public function post()
    {
        return $this->belongsTo('App\Post');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=Vote.java, language=PHP, frame=single]
<?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Vote extends Model
{
    public function user()
    {
        return $this->belongsTo('App\User');
    }

    public function post()
    {
        return $this->belongsTo('App\Post');
    }
}
\end{lstlisting}

\section{Migrations}

\begin{lstlisting}[showstringspaces=false, title=CreateUsersTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateUsersTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('users', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->string('name');
            $table->string('email')->unique();
            $table->timestamp('email_verified_at')->nullable();
            $table->string('password');
            $table->rememberToken();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('users');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreatePostsTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreatePostsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('posts', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->unsignedBigInteger('user_id');
            $table->string('title');
            $table->mediumText('featured_pic_path')->nullable();
            $table->longText('content');
            $table->timestamps();

            $table->foreign('user_id')->references('id')->
              on('users')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('posts');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreateCommentsTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateCommentsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('comments', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->unsignedBigInteger('user_id');
            $table->unsignedBigInteger('post_id');
            $table->mediumText('text');
            $table->timestamps();

            $table->foreign('user_id')->references('id')->
              on('users')->onDelete('cascade')->onupdate('cascade');

            $table->foreign('post_id')->references('id')->
              on('posts')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('comments');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreateViewsTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateViewsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('views', function (Blueprint $table) {
            $table->primary(['identifier', 'post_id'], 'identifier_post');
            $table->string('identifier')->unique();
            $table->unsignedBigInteger('post_id');
            $table->timestamps();

            $table->foreign('post_id')->references('id')->
              on('posts')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('views');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreateVotesTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateVotesTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('votes', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->unsignedBigInteger('user_id');
            $table->unsignedBigInteger('post_id');
            $table->tinyInteger('type');
            $table->timestamps();

            $table->foreign('user_id')->references('id')->
              on('users')->onDelete('cascade')->onupdate('cascade');

            $table->foreign('post_id')->references('id')->
              on('posts')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('votes');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreateTagsTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateTagsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('tags', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->string('name')->unique();
            $table->timestamps();
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('tags');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreateProfilesTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreateProfilesTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('profiles', function (Blueprint $table) {
            $table->bigIncrements('id');
            $table->unsignedBigInteger('user_id');
            $table->mediumText('bio');
            $table->timestamps();

            $table->foreign('user_id')->references('id')->
              on('users')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('profiles');
    }
}
\end{lstlisting}

\begin{lstlisting}[showstringspaces=false, title=CreatePostTagTable.java, language=PHP, frame=single]
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

class CreatePostTagTable extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::create('post_tag', function (Blueprint $table) {
            $table->primary(['post_id', 'tag_id'], 'post_tag');
            $table->unsignedBigInteger('post_id');
            $table->unsignedBigInteger('tag_id');

            $table->foreign('post_id')->references('id')->
              on('posts')->onDelete('cascade')->onupdate('cascade');

            $table->foreign('tag_id')->references('id')->
              on('tags')->onDelete('cascade')->onupdate('cascade');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::dropIfExists('post_tag');
    }
}
\end{lstlisting}

\section{}

\end{document}  